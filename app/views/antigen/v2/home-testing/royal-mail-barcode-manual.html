{% set version = "v2" %}
{% set pageTitle = "Enter your Royal Mail barcode reference" %}

{% extends "includes/layout.html" %}

{% block beforeContent %}
  <div class="govuk-phase-banner">
    <p class="govuk-phase-banner__content">
      <strong class="govuk-tag govuk-phase-banner__content__tag">
        alpha
      </strong>
      <span class="govuk-phase-banner__text">
        This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.
      </span>
    </p>
  </div>

  <a class="govuk-back-link" href="/antigen/{{version}}/home-testing/royal-mail-barcode">Back</a>
{% endblock %}

{% block content %}
  {% include "includes/gtm-noscript.html" %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <form action="/antigen/{{version}}/home-testing/enter-barcode-number" method="post">

        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset" aria-describedby="enter-barcode-number-hint">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
              <h1 class="govuk-heading-xl govuk-!-margin-bottom-6">
                {{ pageTitle }}
              </h1>
            </legend>
            <span id="enter-barcode-number-hint" class="govuk-body">
              Enter the 13 character reference below the barcode.<br>
              Enter numbers and letters only and not the # hashtag symbol.<br><br>
              The Royal Mail barcode should look like this:
            </span>

            <div class="govuk-!-margin-top-5 govuk-!-margin-bottom-5">
              <img src="/public/images/royal-mail-barcode.png" class="responsive-image" alt="barcode number"/>
            </div>

            <div id="content-1">
              <div class="govuk-form-group">
                <label class="govuk-label" for="mail-barcode-reference-1">
                  Royal Mail barcode reference<br>
                  <span class="govuk-hint">For example, ZD 6904 0038 5GB</span>
                </label>
                <input class="govuk-input govuk-!-width-two-thirds" id="mail-barcode-reference-1" name="mail-barcode-reference-1" type="text" value={{ data['mail-barcode-reference-1'] }}>
              </div>
              <div class="govuk-form-group">
                <label class="govuk-label" for="mail-barcode-reference-2">
                  Confirm Royal Mail barcode reference
                </label>
                <input class="govuk-input govuk-!-width-two-thirds" id="mail-barcode-reference-2" name="mail-barcode-reference-2" type="text" value={{ data['mail-barcode-reference-2'] }}>
              </div>
            </div>

            <div id="content-2" style="display: none;">

            </div>

          </fieldset>
        </div>

        <button class="govuk-button" data-module="govuk-button">Continue</button>

        <p class="govuk-body">
          <a href="/antigen/{{version}}/home-testing/scan-mail-barcode" role="button" draggable="false" class="govuk-link" data-module="govuk-button">
            Use the barcode scanner instead
          </a>
        </p>

      </form>

    </div>
  </div>

  <script>

  setTimeout(function () {
    const content2inner = `
    <div class="govuk-form-group">
      <label class="govuk-label" for="mail-barcode-reference-1">
        Royal Mail barcode reference<br>
        <span class="govuk-hint">For example, AA 1234 5678 9AA</span>
      </label>
      <input class="govuk-input govuk-!-width-two-thirds" id="mail-barcode-reference-1" name="mail-barcode-reference-1" type="text" value={{ data['mail-barcode-reference-1'] or 'AA22346789AA' }}>
    </div>
    <div class="govuk-form-group">
      <label class="govuk-label" for="mail-barcode-reference-2">
        Confirm Royal Mail barcode reference
      </label>
      <input class="govuk-input govuk-!-width-two-thirds" id="mail-barcode-reference-2" name="mail-barcode-reference-2" type="text" value={{ data['mail-barcode-reference-2'] or 'AA22346789AA' }}>
    </div>
    `
    const content1 = document.getElementById('content-1');
    const content2 = document.getElementById('content-2');
    const URLorigin = document.referrer.replace("antigen/v2/home-testing/scan-mail-barcode-option-2", "")
    const replaced = document.referrer.replace(URLorigin , "")
      if (replaced == 'antigen/v2/home-testing/scan-mail-barcode-option-2') {
        content1.parentNode.removeChild(content1)
        content2.style.display = 'block';
        content2.innerHTML = content2inner
      }
  }, 50)

  </script>

{% endblock %}
