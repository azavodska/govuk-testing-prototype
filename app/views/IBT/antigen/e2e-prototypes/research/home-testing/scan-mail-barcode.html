{% set version = "research" %}
{% set pageTitle = "Scan the Royal Mail barcode" %}

{% extends "includes/layout.html" %}

{% block beforeContent %}
<div class="govuk-phase-banner">
  <p class="govuk-phase-banner__content">
    <strong class="govuk-tag govuk-phase-banner__content__tag">
      beta
    </strong>
    <span class="govuk-phase-banner__text">
      This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.
    </span>
  </p>
</div>

  <a class="govuk-back-link" href="/IBT/antigen/e2e-prototypes/{{version}}/home-testing/royal-mail-barcode">Back</a>
{% endblock %}

{% block content %}
  {% include "includes/gtm-noscript.html" %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        <h1 class="govuk-heading-xl govuk-!-margin-bottom-3">{{ pageTitle }}</h1>
        <div class="govuk-body">
          Position the barcode so it fits inside the square on your mobile, tablet or computer's camera. The scan will happen automatically.
        </div>

        <div class="govuk-body">
          You may have to "allow" permission to start the camera. If a camera icon appears inside a square, click on it to start scanning.
        </div>

        <script src="https://cdn.jsdelivr.net/npm/scandit-sdk@5.x"></script>

        <scandit-barcode-picker
          id="barcodePicker"
          configure.licenseKey="AbZxHhS+NbmiADJfUiuZ2iUaZRoeKa4GCTLu4KFFgGyKH2vUkn0JpCJoyBABajTEH3YqOMsYTH7iWoi+1XBqvjJpT6vbWLs/jEXEg3dhgNQ3UA9ZD0J+8QtrqDinWyRI3XECxE5s9JU1NV9evxgBz9xhH8I9WGbev1mCapBsKk2yYVH33yTlG1tcETWkDzDtbW9mYwh5MyxhcntcwHOFsHwh0zaSHf9bohhSkkQZ5D4xKHAnRhHf5Z7WkHMmCGg5pDu6xTg60YCEZy74vbVdjgg1sBfrxX3mvW/AGytCkn5v4JZ3I1mKqtqCNQxuJTNiecouIIcYdU2Vz3DocNpXGozfmtM/5K6TvrsEeeWYjkA/U8V3CzafMn1xVVdQEvEY0i0elNOtD3TnmrgbF1qv7582IV9kU8JQetxUkj79YLVEJAmAPaxrG4dazuTha6o2El8ElvhvM8U1yN2aXn2LtCfGXZabA0zYCDesH7PzxOlLLYPOr6JIaKPfBK3Gw9VqxrhAYZlPsJoKjEyZkbbisUOY29YFT1AwxrWa49qzETKkUPu0iL2WwzQ4NJnoZs9GFZAeP8V079cKfyI+Q0jPzQglzKmNe7jMepYWDr7jn/sTGb/j+dM/BwSODQQRWiHENrQ2N517Pgob2cP8q33GrBg92OTPcSpI7LB9lI0ZDrfqFX5+cnaFBUn01OU0mYEoU7TPGyHrplUJA0pSUTa+8WvljEpYoNd9qqMtGjc7xP+60/UNix51ZbFFv/tp1vXpUC2IUpWZQHSvgbI6CK6hSBZMwLhWluYIOHM/NicvzIoJlFlMaIVQ/u8HYhM9ZxlNGMf7DyvFswMeiKcqJlrhFISYpi9AHl/Tys6LZ0OKJUCTraR6altiFXc16q/DwGF3uJ6bjbb/uoGGIz/47JVaW+xEVYaXkA=="
          configure.engineLocation="https://cdn.jsdelivr.net/npm/scandit-sdk@5.x/build/"
          playSoundOnScan="true"
          scanSettings.searchArea='{"x":0.1,"y":0.2,"width":0.8,"height":0.6}'
          guiStyle="viewfinder"
          enableTorchToggle="true"
          videoFit="cover"
          scanSettings.enabledSymbologies='["data-matrix", "code128", "qr"]'
          >
        </scandit-barcode-picker>

        <br><br>
        <button class="govuk-button govuk-button--secondary" data-module="govuk-button">Enter barcode manually</button>

        <!--a href="/IBT/antigen/e2e-prototypes/{{version}}/home-testing/royal-mail-barcode" role="button" draggable="false" class="govuk-button govuk-!-margin-top-3 govuk-!-margin-bottom-3" data-module="govuk-button">
          Cancel
        </a-->

        <!--p class="govuk-body">
          <a href="/IBT/antigen/e2e-prototypes/{{version}}/home-testing/royal-mail-barcode-manual" role="button" draggable="false" class="govuk-link" data-module="govuk-button">
            Enter barcode manually instead
          </a>
        </p-->

    </div>
  </div>

  <script type="text/javascript">

    const barcodePicker = document.getElementById('barcodePicker')
    barcodePicker.addEventListener('scan', function (event) {
      event.preventDefault()
      setTimeout(function () {
        window.location.href = '/IBT/antigen/e2e-prototypes/{{version}}/home-testing/royal-mail-barcode-manual';
      }, 100)
    })

  </script>

{% endblock %}
